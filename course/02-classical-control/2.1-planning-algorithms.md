# 2.1 规划算法

- **作者**: Damon Li
- **日期**: 2026年2月4日

## 1. 概述

机器人规划算法是机器人自主性的核心，旨在为机器人生成一系列动作或状态序列，使其能够从当前状态到达目标状态，同时满足各种约束条件（如避障、动力学限制、任务逻辑等）[1]。在机器人抓取与操作中，规划算法尤为关键，它决定了机器人如何安全、高效地完成复杂的任务，例如将物体从A点移动到B点，或者执行精密的装配操作。

规划算法通常可以分为**任务规划 (Task Planning)** 和 **运动规划 (Motion Planning)**。任务规划关注高层次的逻辑和动作序列，例如“先抓取物体，再放置到指定位置”；而运动规划则关注低层次的几何和物理可行性，例如“如何移动机械臂以抓取物体而不发生碰撞” [2]。本节将重点介绍运动规划中的关键算法。

## 2. 核心原理

运动规划的核心挑战在于在高维度的机器人构型空间（Configuration Space, C-space）中寻找一条无碰撞路径。C-space将机器人的所有可能位姿抽象为一个点，将物理障碍物“膨胀”为C-space障碍物，从而将机器人本体的碰撞检测问题简化为C-space中一个点的碰撞检测问题 [3]。

### 2.1 构型空间 (Configuration Space, C-space)

机器人的构型空间是由其所有关节变量或自由度组成的数学空间。例如，一个6自由度机械臂的C-space是一个6维空间。在C-space中，机器人被视为一个点，而环境中的障碍物则被映射为C-space障碍物（C-obstacles）。规划的目标是在C-space的自由空间（C-free space）中找到一条从起始构型到目标构型的路径 [3]。

### 2.2 路径与轨迹

-   **路径 (Path)**：指机器人从起始构型到目标构型的一系列连续构型，它只关注几何连通性，不包含时间信息。
-   **轨迹 (Trajectory)**：在路径的基础上增加了时间信息，描述了机器人在每个时间点的构型、速度、加速度等，需要满足机器人的动力学和运动学约束。轨迹规划通常在路径规划之后进行，以确保运动的平滑性和可执行性 [4]。

### 2.3 碰撞检测

碰撞检测是运动规划的基础，它判断机器人在给定构型下是否与环境中的障碍物发生接触。高效的碰撞检测算法对于运动规划的性能至关重要。

## 3. 关键方法/算法

### 3.1 基于采样的方法 (Sampling-based Methods)

这类方法在高维空间中表现出色，通过随机采样构型点来构建图或树，从而搜索路径。它们通常不保证找到最优路径，但能较快地找到可行路径 [5]。

-   **概率路线图 (Probabilistic Roadmaps, PRM)**：PRM算法分为两个阶段：
    1.  **构建阶段 (Construction Phase)**：在C-free space中随机采样大量构型点作为节点，并尝试连接距离较近的节点（连接路径需无碰撞），从而构建一个无向图（路线图）。
    2.  **查询阶段 (Query Phase)**：将起始构型和目标构型连接到路线图中的最近节点，然后使用图搜索算法（如Dijkstra或A*）在路线图中寻找一条路径 [6]。
    PRM适用于多查询场景，一旦路线图构建完成，可以快速回答多个路径查询。

-   **快速搜索随机树 (Rapidly-exploring Random Trees, RRT)**：RRT算法通过增量地生长一棵树来探索C-space。它从起始点开始，每次迭代随机采样一个点，然后从树中找到离该采样点最近的节点，并向采样点方向扩展一小段距离，将新生成的节点添加到树中。RRT及其变种（如RRT*，保证渐近最优性）在高维空间和复杂障碍物环境中非常有效 [7]。

### 3.2 基于搜索的方法 (Search-based Methods)

这类方法通常在离散化的空间中进行搜索，能够找到最优路径（如果存在）。

-   **Dijkstra算法**：一种单源最短路径算法，用于在赋权图中寻找从起始节点到所有其他节点的最短路径。它保证找到最优解，但计算成本较高，尤其是在大型图中 [8]。
-   **A*算法**：A*算法是Dijkstra算法的扩展，它引入了启发式函数来指导搜索方向，从而提高了搜索效率。A*算法在网格地图或离散状态空间中寻找最短路径时非常有效，并且如果启发式函数是可接受的（admissible），则能保证找到最优解 [9]。

### 3.3 轨迹生成 (Trajectory Generation)

一旦路径被规划出来，通常需要进行轨迹生成，以确保机器人的运动平滑、符合动力学约束。常见的轨迹生成方法包括：

-   **多项式插值**：使用三次、五次等多项式函数来连接路径点，并确保在连接点处速度和加速度的连续性。
-   **样条曲线**：如B样条、NURBS等，可以生成平滑的曲线，常用于机器人末端执行器的轨迹规划。
-   **时间参数化**：为几何路径分配时间信息，以满足速度、加速度和力矩限制。

## 4. 代码示例 (RRT)

以下是一个简化的RRT路径规划Python示例，用于在2D环境中寻找无碰撞路径。此示例已在`1.1-motion-planning.md`中提供，并生成了`rrt_path_planning.png`图像。

```python
# 代码示例请参考 1.1-motion-planning.md 中的 RRT 示例
# 该示例演示了如何在2D环境中实现基本的RRT算法，并生成路径。
# 图像输出路径: ./images/rrt_path_planning.png
```

## 5. 参考资料

- [1] LaValle, S. M. (2006). *Planning Algorithms*. Cambridge University Press.
- [2] Zacharias, F., et al. (2006). Bridging the Gap between Task Planning and Path Planning. *IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)*. [PDF](https://elib.dlr.de/45152/1/IROS06-730ZachariasBridging_the_Gap.pdf)
- [3] LaValle, S. M. (2011). Motion Planning: The Essentials. *IEEE Robotics & Automation Magazine*, 18(3), 10-22. [PDF](https://lavalle.pl/papers/Lav11b.pdf)
- [4] Siciliano, B., & Khatib, O. (Eds.). (2008). *Springer Handbook of Robotics*. Springer.
- [5] Kavraki, L. E., Svestka, P., Latombe, J. C., & Overmars, M. H. (1996). Probabilistic roadmaps for path planning in high-dimensional configuration spaces. *IEEE Transactions on Robotics and Automation*, 12(3), 402-413.
- [6] Orthey, A., et al. (2024). Sampling-Based Motion Planning: A Comparative Review. *arXiv preprint arXiv:2401.00000*.
- [7] LaValle, S. M. (1998). Rapidly-exploring random trees: A new tool for path planning. *Technical Report, Computer Science Department, Iowa State University*.
- [8] Dijkstra, E. W. (1959). A note on two problems in connexion with graphs. *Numerische Mathematik*, 1(1), 269-271.
- [9] Hart, P. E., Nilsson, N. J., & Raphael, B. (1968). A Formal Basis for the Heuristic Determination of Minimum Cost Paths. *IEEE Transactions on Systems Science and Cybernetics*, 4(2), 100-107.
